<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internet free</title>
    <style>
       /* styles.css */
body {
  font-family: 'Open Sans', sans-serif;
  background-color: #f7f7f7;
  margin: 0;
  padding: 0;
}

.container {
  max-width: 800px;
  margin: 40px auto;
  padding: 20px;
  background-color: #fff;
  border: 1px solid #ddd;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

h1 {
  font-weight: bold;
  color: #333;
  margin-top: 0;
}

#video {
  width: 100%;
  height: 480px;
  border: none;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

#start-button {
  background-color: #4CAF50;
  color: #fff;
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

#start-button:hover {
  background-color: #3e8e41;
}

#start-button:active {
  background-color: #3e8e41;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
}
    </style>
</head>
<body>
  <center>  <h1>Internet free</h1></center>
    <video id="video" width="640" height="480"></video>
  <center > <button id="start-button">Start</button></center>
    <script>
        // script.js
const video = document.getElementById('video');
const startButton = document.getElementById('start-button');

startButton.addEventListener('click', async () => {
    try {
        // Request access to camera and microphone
        const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });

        // Set the video source to the stream
        video.srcObject = stream;

        // Create a MediaRecorder instance
        const mediaRecorder = new MediaRecorder(stream);

        // Set up event listeners for the MediaRecorder
        mediaRecorder.onstart = () => {
            console.log('Recording started');
        };

        mediaRecorder.onstop = () => {
            console.log('Recording stopped');
        };

        mediaRecorder.ondataavailable = (event) => {
            // Send the recorded data to the server
            const formData = new FormData();
            formData.append('video', event.data);

            fetch('/upload', {
                method: 'POST',
                body: formData
            })
            .then((response) => response.json())
            .then((data) => console.log(data))
            .catch((error) => console.error(error));
        };

        // Start recording
        mediaRecorder.start();

        // Stop recording after 10 seconds
        setTimeout(() => {
            mediaRecorder.stop();
        }, 10000);
    } catch (error) {
        console.error('Error accessing camera and microphone:', error);
    }
});

// server.js
const express = require('express');
const app = express();
const multer = require('multer');

const upload = multer({ dest: './uploads/' });

app.post('/upload', upload.single('video'), (req, res) => {
    // Save the uploaded video to the database
    const videoBuffer = req.file.buffer;
    // TO DO: implement database logic to store the video buffer

    res.json({ message: 'Video uploaded successfully' });
});

app.listen(3000, () => {
    console.log('Server listening on port 3000');
});
    </script>
</body>
</html>
